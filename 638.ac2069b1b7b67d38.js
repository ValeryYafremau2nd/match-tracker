"use strict";(self.webpackChunkfootball_reminder=self.webpackChunkfootball_reminder||[]).push([[638],{1638:(q,R,c)=>{c.r(R),c.d(R,{AuthModule:()=>Z});var g=c(9808),d=c(3075),v=c(1553),L=c(655),m=c(8379),b=c(591),t=c(5e3),P=c(9351);let w=(()=>{class i{constructor(e,s){this.route=e,this.store=s,this.mode$=new b.X(this.route.snapshot.params.mode),this.modeSub=this.route.params.subscribe(o=>this.mode$.next(o.mode))}ngOnDestroy(){this.modeSub.unsubscribe()}login(e,s){this.store.dispatch(new m.m3({email:e,password:s}))}loginOauth(e,s){this.store.dispatch(new m.vp({user:e,token:s}))}logout(){this.store.dispatch(new m.y3)}signup(e,s){this.store.dispatch(new m.Mo({email:e,password:s}))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(v.gz),t.LFG(P.yh))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var S=c(8929),y=c(341),O=c(2654),A=c(7770),E=c(5279),k=c(5283);class U extends S.xQ{constructor(n=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,s){super(),this.scheduler=s,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=n<1?1:n,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(n){const e=this._events;e.push(n),e.length>this._bufferSize&&e.shift(),super.next(n)}nextTimeWindow(n){this._events.push(new N(this._getNow(),n)),this._trimBufferThenGetEvents(),super.next(n)}_subscribe(n){const e=this._infiniteTimeWindow,s=e?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,a=s.length;let r;if(this.closed)throw new E.N;if(this.isStopped||this.hasError?r=O.w.EMPTY:(this.observers.push(n),r=new k.W(this,n)),o&&n.add(n=new A.ht(n,o)),e)for(let l=0;l<a&&!n.closed;l++)n.next(s[l]);else for(let l=0;l<a&&!n.closed;l++)n.next(s[l].value);return this.hasError?n.error(this.thrownError):this.isStopped&&n.complete(),r}_getNow(){return(this.scheduler||y.c).now()}_trimBufferThenGetEvents(){const n=this._getNow(),e=this._bufferSize,s=this._windowTime,o=this._events,a=o.length;let r=0;for(;r<a&&!(n-o[r].time<s);)r++;return a>e&&(r=Math.max(r,a-e)),r>0&&o.splice(0,r),o}}class N{constructor(n,e){this.time=n,this.value=e}}class D extends S.xQ{constructor(){super(...arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}_subscribe(n){return this.hasError?(n.error(this.thrownError),O.w.EMPTY):this.hasCompleted&&this.hasNext?(n.next(this.value),n.complete(),O.w.EMPTY):super._subscribe(n)}next(n){this.hasCompleted||(this.value=n,this.hasNext=!0)}error(n){this.hasCompleted||super.error(n)}complete(){this.hasCompleted=!0,this.hasNext&&super.next(this.value),super.complete()}}class T{}let f=(()=>{class i extends class M{constructor(){}loadScript(n,e,s,o=null){if("undefined"!=typeof document&&!document.getElementById(n)){let a=document.createElement("script");a.async=!0,a.src=e,a.onload=s,o||(o=document.head),o.appendChild(a)}}}{constructor(e,s={scope:"email"}){super(),this.clientId=e,this.initOptions=s}initialize(){return new Promise((e,s)=>{try{this.loadScript(i.PROVIDER_ID,"https://apis.google.com/js/platform.js",()=>{gapi.load("auth2",()=>{this.auth2=gapi.auth2.init(Object.assign(Object.assign({},this.initOptions),{client_id:this.clientId})),this.auth2.then(()=>{e()}).catch(o=>{s(o)})})})}catch(o){s(o)}})}getLoginStatus(e){const s=Object.assign(Object.assign({},this.initOptions),e);return new Promise((o,a)=>{if(this.auth2.isSignedIn.get()){let r=new T;const l=this.auth2.currentUser.get().getBasicProfile(),h=this.auth2.currentUser.get().getAuthResponse(!0);r.id=l.getId(),r.name=l.getName(),r.email=l.getEmail(),r.photoUrl=l.getImageUrl(),r.firstName=l.getGivenName(),r.lastName=l.getFamilyName(),r.response=h;const u=p=>{r.authToken=p.access_token,r.idToken=p.id_token,o(r)};s.refreshToken?this.auth2.currentUser.get().reloadAuthResponse().then(u):u(this.auth2.currentUser.get().getAuthResponse(!0))}else a(`No user is currently logged in with ${i.PROVIDER_ID}`)})}signIn(e){const s=Object.assign(Object.assign({},this.initOptions),e);return new Promise((o,a)=>{(s&&s.offline_access?this.auth2.grantOfflineAccess(e):this.auth2.signIn(e)).then(h=>{let u=new T;if(h&&h.code)u.authorizationCode=h.code;else{let p=this.auth2.currentUser.get().getBasicProfile(),I=this.auth2.currentUser.get().getAuthResponse(!0),G=I.access_token,B=I.id_token;u.id=p.getId(),u.name=p.getName(),u.email=p.getEmail(),u.photoUrl=p.getImageUrl(),u.firstName=p.getGivenName(),u.lastName=p.getFamilyName(),u.authToken=G,u.idToken=B,u.response=I}o(u)},h=>{a(h)}).catch(h=>{a(h)})})}signOut(e){return new Promise((s,o)=>{let a;a=e?this.auth2.disconnect():this.auth2.signOut(),a.then(r=>{r?o(r):s()}).catch(r=>{o(r)})})}}return i.PROVIDER_ID="GOOGLE",i})(),_=(()=>{class i{constructor(e){this.providers=new Map,this.autoLogin=!1,this._user=null,this._authState=new U(1),this.initialized=!1,this._initState=new D,e instanceof Promise?e.then(s=>{this.initialize(s)}):this.initialize(e)}get authState(){return this._authState.asObservable()}get initState(){return this._initState.asObservable()}initialize(e){this.autoLogin=void 0!==e.autoLogin&&e.autoLogin;const{onError:s=console.error}=e;e.providers.forEach(o=>{this.providers.set(o.id,o.provider)}),Promise.all(Array.from(this.providers.values()).map(o=>o.initialize())).then(()=>{if(this.autoLogin){const o=[];let a=!1;this.providers.forEach((r,l)=>{let h=r.getLoginStatus();o.push(h),h.then(u=>{u.provider=l,this._user=u,this._authState.next(u),a=!0}).catch(console.debug)}),Promise.all(o).catch(()=>{a||(this._user=null,this._authState.next(null))})}}).catch(o=>{s(o)}).finally(()=>{this.initialized=!0,this._initState.next(this.initialized),this._initState.complete()})}refreshAuthToken(e){return new Promise((s,o)=>{if(this.initialized)if(e!==f.PROVIDER_ID)o(i.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN);else{const a=this.providers.get(e);a?a.getLoginStatus({refreshToken:!0}).then(r=>{r.provider=e,this._user=r,this._authState.next(r),s()}).catch(r=>{o(r)}):o(i.ERR_LOGIN_PROVIDER_NOT_FOUND)}else o(i.ERR_NOT_INITIALIZED)})}signIn(e,s){return new Promise((o,a)=>{if(this.initialized){let r=this.providers.get(e);r?r.signIn(s).then(l=>{l.provider=e,o(l),this._user=l,this._authState.next(l)}).catch(l=>{a(l)}):a(i.ERR_LOGIN_PROVIDER_NOT_FOUND)}else a(i.ERR_NOT_INITIALIZED)})}signOut(e=!1){return new Promise((s,o)=>{if(this.initialized)if(this._user){let r=this.providers.get(this._user.provider);r?r.signOut(e).then(()=>{s(),this._user=null,this._authState.next(null)}).catch(l=>{o(l)}):o(i.ERR_LOGIN_PROVIDER_NOT_FOUND)}else o(i.ERR_NOT_LOGGED_IN);else o(i.ERR_NOT_INITIALIZED)})}}return i.ERR_LOGIN_PROVIDER_NOT_FOUND="Login provider not found",i.ERR_NOT_LOGGED_IN="Not logged in",i.ERR_NOT_INITIALIZED="Login providers not ready yet. Are there errors on your console?",i.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN="Chosen login provider is not supported for refreshing a token",i.\u0275fac=function(e){return new(e||i)(t.LFG("SocialAuthServiceConfig"))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),x=(()=>{class i{constructor(e){if(e)throw new Error("SocialLoginModule is already loaded. Import it in the AppModule only")}static initialize(e){return{ngModule:i,providers:[_,{provide:"SocialAuthServiceConfig",useValue:e}]}}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(i,12))},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[_],imports:[[g.ez]]}),i})();function j(i,n){1&i&&(t.TgZ(0,"div",5),t._UZ(1,"input",13),t.qZA())}function C(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"button",14),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(),a=t.MAs(3);return o.login(a)}),t._uU(2," Sign in "),t.qZA(),t.TgZ(3,"button",15),t._uU(4," Swith to Sign up "),t.qZA()()}2&i&&(t.xp6(3),t.Q6J("routerLink","/auth/signup"))}function z(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"button",14),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(),a=t.MAs(3);return o.signup(a)}),t._uU(2," Sign up "),t.qZA(),t.TgZ(3,"button",15),t._uU(4," Swith to Sign in "),t.qZA()()}2&i&&(t.xp6(3),t.Q6J("routerLink","/auth/login"))}const V=function(i){return{hidden:i}};let F=(()=>{class i{constructor(e,s,o){this.store=e,this.socialAuthService=s,this.authService=o,this.isLoginMode=!0,this.error=" "}ngOnInit(){this.modeSub=this.authService.mode$.subscribe(e=>this.mode=e),this.authService.logout(),this.store.select("auth").subscribe(e=>{this.error=e.error}),this.socialAuthService.authState.subscribe(e=>{this.socialUser=e,this.isLoggedin=null!=e})}ngOnDestroy(){this.modeSub.unsubscribe()}login(e){this.authService.login(e.form.controls.email.value,e.form.controls.password.value)}signup(e){const s=e.form.controls;s.confirmPassword.value!==s.password.value?this.error="Password confirmed incorrectly.":this.authService.signup(e.form.controls.email.value,e.form.controls.password.value)}loginWithGoogle(){return(0,L.mG)(this,void 0,void 0,function*(){const e=yield this.socialAuthService.signIn(f.PROVIDER_ID);this.authService.loginOauth(e.id,e.response.id_token)})}logOut(){this.socialAuthService.signOut()}onSwitchMode(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(P.yh),t.Y36(_),t.Y36(w))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-auth"]],features:[t._Bn([w])],decls:19,vars:9,consts:[[1,"auth-form"],[1,"col-xs-12","col-md-offset-3"],["authForm","ngForm"],[2,"text-align","center","font-size","25px"],[1,"error",3,"ngClass"],[1,"form-group"],["type","email","id","email","ngModel","","placeholder","Email","name","email","required","","email","",1,"form-control"],["type","password","id","password","ngModel","","name","password","placeholder","Password","required","","minlength","6",1,"form-control"],["class","form-group",4,"ngIf"],["type","button",1,"btn","btn-light",2,"background-color","wheat","float","left","margin-right","10px",3,"click"],["src","./assets/icons/google.png",2,"height","15px"],[3,"ngSwitch"],[4,"ngSwitchCase"],["type","password","id","confirmPassword","ngModel","","name","confirmPassword","placeholder","Confirm password","required","","minlength","6",1,"form-control"],["type","submit",1,"btn","btn-success",2,"background-color","darkcyan",3,"click"],[1,"btn","btn-link",2,"color","saddlebrown","text-decoration","underline",3,"routerLink"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",null,2)(4,"div",3),t._uU(5),t.qZA(),t.TgZ(6,"div",4),t._uU(7),t.qZA(),t.TgZ(8,"div",5),t._UZ(9,"input",6),t.qZA(),t.TgZ(10,"div",5),t._UZ(11,"input",7),t.qZA(),t.YNc(12,j,2,0,"div",8),t.TgZ(13,"button",9),t.NdJ("click",function(){return s.loginWithGoogle()}),t._UZ(14,"img",10),t._uU(15," Sing in with Google "),t.qZA(),t.TgZ(16,"div",11),t.YNc(17,C,5,1,"div",12),t.YNc(18,z,5,1,"div",12),t.qZA()()()()),2&e&&(t.xp6(5),t.Oqu(s.login?"Sign in":"Sign up"),t.xp6(1),t.Q6J("ngClass",t.VKq(7,V,!s.error)),t.xp6(1),t.Oqu(s.error),t.xp6(5),t.Q6J("ngIf","signup"===s.mode),t.xp6(4),t.Q6J("ngSwitch",s.mode),t.xp6(1),t.Q6J("ngSwitchCase","login"),t.xp6(1),t.Q6J("ngSwitchCase","signup"))},directives:[d._Y,d.JL,d.F,g.mk,d.Fj,d.JJ,d.On,d.Q7,d.on,d.wO,g.O5,g.RF,g.n9,v.rH],styles:[".auth-form[_ngcontent-%COMP%]{position:absolute;display:flex;height:80%;align-items:center;width:100%;justify-content:center}.auth-form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:30px;width:327px}.error[_ngcontent-%COMP%]{height:30px;text-align:center;border-radius:4px;background-color:#8b0000;padding:2px 10px;margin-bottom:5px;color:#fff}.hidden[_ngcontent-%COMP%]{visibility:hidden}"]}),i})(),Z=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[{provide:"SocialAuthServiceConfig",useValue:{autoLogin:!1,providers:[{id:f.PROVIDER_ID,provider:new f("805824721583-pc952sqdgbl6dqr7dutm6lb24d9rbjvm.apps.googleusercontent.com")}]}}],imports:[[g.ez,d.u5,d.UX,x,v.Bz.forChild([{path:"",component:F}])]]}),i})()}}]);